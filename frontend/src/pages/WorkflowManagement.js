import React,{useState} from 'react';import{Container,Grid,Paper,Typography,Box,Button,Card,CardContent,CardHeader,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Chip,Dialog,DialogTitle,DialogContent,DialogActions,TextField,MenuItem,Select,FormControl,InputLabel}from '@mui/material';import{Add,Edit,Delete,PlayArrow,PauseCircle}from '@mui/icons-material';const WF=()=>{const[wfs,setWfs]=useState([{id:1,name:'Registration',status:'active',steps:4,created:'2024-01-15'},{id:2,name:'Verification',status:'active',steps:3,created:'2024-02-01'},{id:3,name:'Approval',status:'inactive',steps:2,created:'2024-01-20'},{id:4,name:'Archive',status:'active',steps:5,created:'2024-03-10'},{id:5,name:'Renewal',status:'active',steps:3,created:'2024-05-15'}]);const[dlg,setDlg]=useState(false);const[edit,setEdit]=useState(null);const[nw,setNw]=useState({name:'',status:'active',steps:0});const add=()=>{if(nw.name){setWfs([...wfs,{id:Math.max(...wfs.map(w=>w.id),0)+1,name:nw.name,status:nw.status,steps:nw.steps,created:new Date().toLocaleDateString()}]);setNw({name:'',status:'active',steps:0});setDlg(false);}}; const save=()=>{if(edit){setWfs(wfs.map(w=>w.id===edit.id?edit:w));setEdit(null);setDlg(false);}}; return<Container maxWidth="lg" sx={{py:{xs:2,md:4}}}><Box sx={{mb:4,display:'flex',justifyContent:'space-between',alignItems:'center'}}><Typography variant="h4" sx={{color:'#1976d2',fontWeight:'bold'}}>Workflows</Typography><Button variant="contained" startIcon={<Add/>} onClick={()=>{setEdit(null);setDlg(true)}} sx={{backgroundColor:'#1976d2'}}>Add</Button></Box><TableContainer component={Paper}><Table><TableHead><TableRow sx={{backgroundColor:'#1976d2'}}><TableCell sx={{color:'#fff'}}>Name</TableCell><TableCell sx={{color:'#fff'}}>Status</TableCell><TableCell sx={{color:'#fff'}}>Steps</TableCell><TableCell sx={{color:'#fff'}}>Created</TableCell><TableCell sx={{color:'#fff'}}>Actions</TableCell></TableRow></TableHead><TableBody>{wfs.map(w=><TableRow key={w.id}><TableCell>{w.name}</TableCell><TableCell><Chip label={w.status} color={w.status==='active'?'success':'default'}/></TableCell><TableCell>{w.steps}</TableCell><TableCell>{w.created}</TableCell><TableCell><Button size="small" onClick={()=>{setEdit(w);setDlg(true)}}>Edit</Button><Button size="small" onClick={()=>setWfs(wfs.filter(x=>x.id!==w.id))} color="error">Delete</Button></TableCell></TableRow>)}</TableBody></Table></TableContainer><Dialog open={dlg} onClose={()=>{setDlg(false);setEdit(null)}} maxWidth="sm" fullWidth><DialogTitle>{edit?'Edit':'Add'}</DialogTitle><DialogContent sx={{pt:2}}><TextField fullWidth label="Name" value={edit?edit.name:nw.name} onChange={e=>edit?setEdit({...edit,name:e.target.value}):setNw({...nw,name:e.target.value})} margin="normal"/><FormControl fullWidth sx={{mt:2}}><InputLabel>Status</InputLabel><Select value={edit?edit.status:nw.status} onChange={e=>edit?setEdit({...edit,status:e.target.value}):setNw({...nw,status:e.target.value})} label="Status"><MenuItem value="active">Active</MenuItem><MenuItem value="inactive">Inactive</MenuItem></Select></FormControl><TextField fullWidth label="Steps" type="number" value={edit?edit.steps:nw.steps} onChange={e=>edit?setEdit({...edit,steps:parseInt(e.target.value)||0}):setNw({...nw,steps:parseInt(e.target.value)||0})} margin="normal"/></DialogContent><DialogActions><Button onClick={()=>{setDlg(false);setEdit(null)}}>Cancel</Button><Button onClick={edit?save:add} variant="contained" sx={{backgroundColor:'#1976d2'}}>Save</Button></DialogActions></Dialog></Container>;};export default WF;
