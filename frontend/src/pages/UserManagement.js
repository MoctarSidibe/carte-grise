import React,{useState} from 'react';import{Container,Paper,Typography,Box,Button,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Chip,Dialog,DialogTitle,DialogContent,DialogActions,TextField,FormControl,InputLabel,Select,MenuItem,IconButton}from '@mui/material';import{Add,Edit,Delete,ToggleOn,ToggleOff}from '@mui/icons-material';const UM=()=>{const[users,setUsers]=useState([{id:1,name:'Alice',email:'alice@admin.fr',role:'Admin',status:'active',join:'2024-01-10'},{id:2,name:'Bob',email:'bob@validator.fr',role:'Validator',status:'active',join:'2024-02-15'},{id:3,name:'Carol',email:'carol@agent.fr',role:'Agent',status:'active',join:'2024-03-01'},{id:4,name:'David',email:'david@patrimoine.fr',role:'Patrimoine',status:'inactive',join:'2024-01-20'},{id:5,name:'Emma',email:'emma@dcrtct.fr',role:'DCRTCT',status:'active',join:'2024-04-05'},{id:6,name:'Frank',email:'frank@agent.fr',role:'Agent',status:'active',join:'2024-05-12'}]);const[dlg,setDlg]=useState(false);const[edit,setEdit]=useState(null);const[nw,setNw]=useState({name:'',email:'',role:'Agent',status:'active'});const add=()=>{if(nw.name&&nw.email){setUsers([...users,{id:Math.max(...users.map(u=>u.id),0)+1,name:nw.name,email:nw.email,role:nw.role,status:nw.status,join:new Date().toLocaleDateString()}]);setNw({name:'',email:'',role:'Agent',status:'active'});setDlg(false);}}; const save=()=>{if(edit){setUsers(users.map(u=>u.id===edit.id?edit:u));setEdit(null);setDlg(false);}}; return<Container maxWidth="lg" sx={{py:{xs:2,md:4}}}><Box sx={{mb:4,display:'flex',justifyContent:'space-between',alignItems:'center'}}><Typography variant="h4" sx={{color:'#1976d2',fontWeight:'bold'}}>Users</Typography><Button variant="contained" startIcon={<Add/>} onClick={()=>{setEdit(null);setDlg(true)}} sx={{backgroundColor:'#1976d2'}}>Add</Button></Box><TableContainer component={Paper}><Table><TableHead><TableRow sx={{backgroundColor:'#1976d2'}}><TableCell sx={{color:'#fff'}}>Name</TableCell><TableCell sx={{color:'#fff'}}>Email</TableCell><TableCell sx={{color:'#fff'}}>Role</TableCell><TableCell sx={{color:'#fff'}}>Status</TableCell><TableCell sx={{color:'#fff'}}>Join</TableCell><TableCell sx={{color:'#fff'}}>Actions</TableCell></TableRow></TableHead><TableBody>{users.map(u=><TableRow key={u.id}><TableCell>{u.name}</TableCell><TableCell>{u.email}</TableCell><TableCell><Chip label={u.role} variant="outlined"/></TableCell><TableCell><Chip label={u.status} color={u.status==='active'?'success':'default'}/></TableCell><TableCell>{u.join}</TableCell><TableCell><IconButton size="small" onClick={()=>{setEdit(u);setDlg(true)}}><Edit fontSize="small"/></IconButton><IconButton size="small" onClick={()=>setUsers(users.map(x=>x.id===u.id?{...x,status:x.status==='active'?'inactive':'active'}:x))}>{u.status==='active'?<ToggleOn/>:<ToggleOff/>}</IconButton><IconButton size="small" color="error" onClick={()=>setUsers(users.filter(x=>x.id!==u.id))}><Delete fontSize="small"/></IconButton></TableCell></TableRow>)}</TableBody></Table></TableContainer><Dialog open={dlg} onClose={()=>{setDlg(false);setEdit(null)}} maxWidth="sm" fullWidth><DialogTitle>{edit?'Edit':'Add'}</DialogTitle><DialogContent sx={{pt:2}}><TextField fullWidth label="Name" value={edit?edit.name:nw.name} onChange={e=>edit?setEdit({...edit,name:e.target.value}):setNw({...nw,name:e.target.value})} margin="normal"/><TextField fullWidth label="Email" type="email" value={edit?edit.email:nw.email} onChange={e=>edit?setEdit({...edit,email:e.target.value}):setNw({...nw,email:e.target.value})} margin="normal"/><FormControl fullWidth sx={{mt:2}}><InputLabel>Role</InputLabel><Select value={edit?edit.role:nw.role} onChange={e=>edit?setEdit({...edit,role:e.target.value}):setNw({...nw,role:e.target.value})} label="Role"><MenuItem value="Agent">Agent</MenuItem><MenuItem value="Validator">Validator</MenuItem><MenuItem value="Admin">Admin</MenuItem><MenuItem value="Patrimoine">Patrimoine</MenuItem><MenuItem value="DCRTCT">DCRTCT</MenuItem></Select></FormControl><FormControl fullWidth sx={{mt:2}}><InputLabel>Status</InputLabel><Select value={edit?edit.status:nw.status} onChange={e=>edit?setEdit({...edit,status:e.target.value}):setNw({...nw,status:e.target.value})} label="Status"><MenuItem value="active">Active</MenuItem><MenuItem value="inactive">Inactive</MenuItem></Select></FormControl></DialogContent><DialogActions><Button onClick={()=>{setDlg(false);setEdit(null)}}>Cancel</Button><Button onClick={edit?save:add} variant="contained" sx={{backgroundColor:'#1976d2'}}>Save</Button></DialogActions></Dialog></Container>;};export default UM;
